<!DOCTYPE html>
<html>
<head>
  <title>Color Experiment</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  
</head>

<style>
	#box{
		width: 600x;
		height: 100vh;
	}
	
	.form{
		width: 300px;
		background-color: #fff;
		padding: 15px;
		box-shadow: 2px 2px 5px #333;
	}
	
	.play-button{
		position: absolute;
		top: 50%;
		left: 50%;
		visibility: visible;
	}
	
	.play-button i{
		font-size: 5rem !important;
	}
	
	.counter{
		margin: 0;
		position: absolute;
		top: 50%;
		left: 50%;
		-ms-transform: translate(-50%, -50%);
		transform: translate(-50%, -50%);
		font-size: 5rem !important;
		
	
	}
	
	.remaining-time{
		font-size: 3rem !important;
		visibility: hidden;
		margin: 0;
		position: absolute;
		top: 50%;
		left: 50%;
		-ms-transform: translate(-50%, -50%);
		transform: translate(-50%, -50%);
	}
	
	.phoneStart{
		width: 100%;
		visibility: hidden;
	}
	
	/* On screens that are 900px or less, set the background color to blue */
	@media screen and (max-width: 992px) {
	  .phoneStart{
			width: 100%;
			visibility: visible;
		}
		
	  .play-button{
			margin: 0;
			position: absolute;
			top: 50%;
			left: 50%;
			-ms-transform: translate(-50%, -50%);
			transform: translate(-50%, -50%);
			visibility: hidden;
		}
		
	  .remaining-time{
		margin: 0;
		position: absolute;
		top: 50%;
		left: 50%;
		-ms-transform: translate(-50%, -50%);
		transform: translate(-50%, -50%);
		font-size: 2rem !important;
		visibility: hidden;
		
		
	
		}
	}
	
	/* On screens that are 520px or less, set the background color to blue */
	@media screen and (max-width: 520px) {

	  .remaining-time{
		margin: 0;
		position: absolute;
		top: 50%;
		left: 50%;
		-ms-transform: translate(-50%, -50%);
		transform: translate(-50%, -50%);
		font-size: 1.5rem !important;
		visibility: hidden;
		
		}
	}
	
.gradient-handler{
width: 200px;
height: 20px;
background: rgb(255,255,255);
background: linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 24%, rgba(57,214,133,1) 68%, rgba(103,255,99,1) 87%, rgba(103,255,99,1) 100%);
}



.slidecontainer {
  width: 300px;
}

.slider {
  -webkit-appearance: none;
  width: 300px;
  height: 10px;
  background: #d3d3d3;
  outline: none;
  opacity: 0.7;
  -webkit-transition: .2s;
  transition: opacity .2s;
}

.slider:hover {
  opacity: 1;
}

.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 15px;
  height: 15px;
  background: #4CAF50;
  cursor: pointer;
}

.slider::-moz-range-thumb {
  width: 15px;
  height: 15px;
  background: #4CAF50;
  cursor: pointer;
}

.image-holder{
	width: 200px;
	height: 200px;
}

</style>

<body >

<div class="container-fluid" >
	

		
</div>

<div class="container-fluid" id="box" ondblclick="onEscapeFullscreen">

	<div class="col-sm-12" >
	  
	  
	   <div class="btn-group">
		  <button id="settingsButton" type="button" class="btn btn-primary" data-toggle="collapse" data-target="#demo"><i class="fa fa-cogs"></i></button>
		 <!-- <button type="button" class="btn btn-primary" onclick="onPressAction()" ><i class="fa fa-play" aria-hidden="true"></i></button>-->
		</div> 

		<div id="demo" class="collapse show">
			<div class="form">
				<form action="/action_page.php">
					<label>Időtartam</label>
					<div class="row">
						<div class="col" >
							<input id="hour" placeholder="óra" type="number" class="form-control" name="hours" />
						</div>
						<div class="col" >
							<input id="minute" placeholder="perc" type="number" class="form-control" name="minutes" />
						</div>
					</div>
					<label>Színek</label>
					
					<!-- Nav tabs -->
					<ul class="nav nav-tabs">
					  <li class="nav-item">
						<a class="nav-link active" data-toggle="tab" href="#color"><i class="fas fa-palette"></i></a>
					  </li>
					  <li class="nav-item">
						<a class="nav-link" data-toggle="tab" href="#colorLoad"><i class="fas fa-tasks"></i></a>
					  </li>
					</ul>

					<!-- Tab panes -->
					<div class="tab-content">
					  <div class="tab-pane container active" id="color">
					  
						<div id="formGroup" class="form-group">
					 
							
							<div id="control0" class="input-group mb-3">
							  <input name="color" type="color" id="color0" class="form-control" value="#ff0000">
							  <div class="input-group-append">
								<button class="btn btn-success editColor" id="edit0" onclick="onEditColor()"></button>
							  </div>
							</div>
							
							<div id="control1" class="input-group mb-3">
							  <input name="color" type="color" id="color1" class="form-control" value="#0000ff">
							  <div class="input-group-append">
								<button class="btn btn-success editColor" id="edit1" onclick="onEditColor()"></button>
							  </div>
							</div>
							
							
						
						</div>
						
						<br />
						<div class="btn-group">
						  <button type="button" class="btn btn-primary" onclick="addNewColor()" ><i class="fas fa-plus"></i></button>
						  <button type="button" class="btn btn-primary" onclick="removeNewColor()" ><i class="fas fa-minus"></i></button>
						  <button type="button" class="btn btn-primary" onclick="removeNewColor()" ><i class="fas fa-save"></i></button>
						</div> 
					  
					  </div>
					  <div class="tab-pane container fade" id="colorLoad">
						<div class="list-group" id="myList">
							<div class="list-group-item list-group-item-action gradientId"  >
									<label for="comment">Időtartam: 10perc</label>
									<div class="" style='width: 200px;height: 20px;background: rgb(255,255,255);background: linear-gradient(90deg,rgb(255,255,255),rgb(255,255,255),rgb(57,214,133),rgb(103,255,99),rgb(103,255,99));' ></div>	
							</div>
							
							<div class="list-group-item list-group-item-action gradientId"  >
									<label for="comment">Időtartam: 5perc</label>
									<div class="" style='width: 200px;height: 20px;background: rgb(255,255,255);background:linear-gradient(90deg,rgb(255,0,0),rgb(103,255,99),rgb(236,82,227),rgb(214,57,108),rgb(255,99,99));' ></div>	
							</div>
							
							<div class="list-group-item list-group-item-action gradientId"  >
									<label for="comment">Időtartam: 20perc</label>
									<div class="" style='width: 200px;height: 20px;background: rgb(255,255,0);background:linear-gradient(90deg,rgb(255,0,0),rgb(103,255,99),rgb(82,129,236),rgb(57,214,133),rgb(103,255,99));' ></div>	
							</div>
						</div>
					  
					  
					
 
					  </div>
					</div>
					
					
					
					
					
					
				</form>
				<br />
				  <button type="button" class="btn btn-primary phoneStart" data-toggle="collapse" data-target="#demo" onclick="onShowTimer()" >
					<i class="fa fa-play" aria-hidden="true"></i>
				  </button>
			</div>
		</div>
		
		
		
	</div>


		  <h1 id="counter" class="counter">5</h1>
		  <button id="playButton" type="button" class="btn btn-primary play-button" data-toggle="collapse" data-target="#demo" onclick="onShowTimer()" >
			<i class="fa fa-play" aria-hidden="true"></i>
		  </button>
		  <h1 id="remainingTime" class="remaining-time"><span id="remainTime">00:00:00</span><span id="totalTime"> / 00:00:00</span></h1>
	
</div>




<div class="modal fade" id="myModal">
    <div class="modal-dialog">
      <div class="modal-content">
      
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title"></h4>
          <button type="button" class="close" data-dismiss="modal">×</button>
        </div>
        
        <!-- Modal body -->
        <div class="modal-body">
			<div id="colorPicker" class="image-holder"></div>
			<div class="slidecontainer">
				  <input type="range" min="0" max="255" value="50" class="slider" id="rRange" oninput="showVal(this.value)" onchange="showVal(this.value)">
				  <p>Value: <span id="rValue"></span></p>
				</div>
			<div class="slidecontainer">
				<input type="range" min="0" max="255" value="50" class="slider" id="gRange" oninput="showVal(this.value)" onchange="showVal(this.value)">
				<p>Value: <span id="gValue"></span></p>
			</div>
			<div class="slidecontainer">
				<input type="range" min="0" max="255" value="50" class="slider" id="bRange" oninput="showVal(this.value)" onchange="showVal(this.value)">
				<p>Value: <span id="bValue"></span></p>
			</div>
        </div>
        
        <!-- Modal footer -->
        <div class="modal-footer">
			<button type="button" class="btn btn-success" data-dismiss="modal" onclick="addModelColor()">Add</button>
			<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
        
      </div>
    </div>
  </div>


<script>

	$(document).ready(function(){
		document.getElementById("box").addEventListener("dblclick", onEscapeFullscreen);
		document.getElementById("box").addEventListener("click", onShowTime);
		
		$("#counter").fadeOut();

	});

	

// linear interpolation between two values a and b
    // u controls amount of a/b and is in range [0.0,1.0]
    lerp = function(a,b,u) {
        return (1-u) * a + u * b;
    };
	
	var colorList = 0;
	
	var oStatus = true;
	
	var nDuration;
	var nCurrentTime = 0;
	
	onDrawFullTime= function(){
		var nFullDuration = nDuration;
		
		var endHour, endMinutes, endSeconds;
		var currHour, currMinutes, currSeconds;
		
		if(nFullDuration > 0 ){
			
			endHour = (nFullDuration/(3600*1000));
			endMinutes;
			endSeconds; 
			
			if(endHour > 0){
				
				endMinutes = (Number(endHour)-Math.trunc(endHour))*60;
				endHour = Math.trunc(Number((nFullDuration/(3600*1000))));
				endSeconds = (Number(endMinutes)-Math.trunc(endMinutes))*60;
				
				endMinutes = Math.trunc(endMinutes);
				endSeconds = Math.trunc(endSeconds);
			
				
				
			}
			else{
			
			}
			
			console.log(endHour.toString().length);
			console.log(endMinutes.toString().length);
			console.log(endSeconds.toString().length);
			
			endHour.toString().length 	 === 1 ? endHour 	= "0"+endHour 		: endHour;
			endMinutes.toString().length === 1 ? endMinutes	= "0"+endMinutes 	: endMinutes;
			endSeconds.toString().length === 1 ? endSeconds	= "0"+endSeconds 	: endSeconds;
			
			
			document.getElementById("totalTime").innerText = " / "+endHour+":"+endMinutes+":"+endSeconds;
		}
		
		console.log("hours",endHour);
		console.log("minutes",endMinutes);
		console.log("seconds",endSeconds);
	};
	
	reDrawRemainTime = function(nCurrTime){
	
		var milliseconds = parseInt((nCurrTime % 100)),
		seconds = Math.floor((nCurrTime / 100) % 60),
		minutes = Math.floor((nCurrTime / (100 * 60)) % 60),
		hours = Math.floor((nCurrTime / (100 * 60 * 60)) % 24);

		  hours = (hours < 10) ? "0" + hours : hours;
		  minutes = (minutes < 10) ? "0" + minutes : minutes;
		  seconds = (seconds < 10) ? "0" + seconds : seconds;

			
		document.getElementById("remainTime").innerText = ""+hours+":"+minutes+":"+seconds;
		
	
	};
    
    fade = function(element, property, start, end, duration, iteration, laststep) {
      var interval = 10;
      var steps = duration/interval;
      var step_u = 1.0/steps;
      var u = 0.0;
	  
	  nDuration = duration;
	  
      var theInterval = setInterval(function(){

		
		nCurrentTime++
		
		reDrawRemainTime(Math.trunc(nCurrentTime));
		
		
		if(oStatus === false){
		
			colorList = laststep;
			u = 1.0;
		}
		
        var r = parseInt(lerp(start.r, end.r, u));
        var g = parseInt(lerp(start.g, end.g, u));
        var b = parseInt(lerp(start.b, end.b, u));
		
        var colorname = 'rgb('+r+','+g+','+b+')';

		//Show button if the transition is over
		 if (u >= 1.0){ 
			
		}
		if(u >=1.0){
			clearInterval(theInterval) 
			console.log("fade iteration", iteration);
			console.log("last step", laststep);
			
			
			if(colorList != laststep){
				colorList++;
				onPressAction(colorList);
			}
			else{
				$("#playButton").fadeIn(1000);
				$("#settingsButton").fadeIn(1000);
				onCloseFullScreen();
				colorList = 0;
				nCurrentTime = 0;
				oStatus = true;
				nDuration = 0;
				document.getElementById("remainTime").innerText = "00:00:00";
			}
		
			
			
			//
		}
		
        el.style.setProperty(property, colorname);
        u += step_u;
      }, interval);
    };
    
    // in action
    el = document.getElementById('box'); // your element
    property = 'background-color';       // fading property
    //startColor = {r:255, g:  0, b:  0};  // red
    //endColor   = {r:  0, g:128, b:128};  // dark turquoise
	
    onOpenFullScreen = function(){
		var elem = document.documentElement;
		
		 if (elem.requestFullscreen) {
			elem.requestFullscreen();
		 } else if (elem.webkitRequestFullscreen) { /* Safari */
			elem.webkitRequestFullscreen();
		 } else if (elem.msRequestFullscreen) { /* IE11 */
			elem.msRequestFullscreen();
		 }
	}
	
	onCloseFullScreen = function(){
	 if (document.exitFullscreen) {
		document.exitFullscreen();
	  } else if (document.webkitExitFullscreen) { /* Safari */
		document.webkitExitFullscreen();
	  } else if (document.msExitFullscreen) { /* IE11 */
		document.msExitFullscreen();
	  }
	}
	
	addNewColor = function(aColors,duration){
	
	
		if(aColors){
		  
		  var aFormattedColors = aColors.replace(/,/gi, "").split("rgb");
		  
		  for(i=1; i<aFormattedColors.length-1; i++){
		  
			  var hex1 = Number(aFormattedColors[i].replace(/["'()]/g,"").replace("%","").split(" ")[0]);
			  var hex2 = Number(aFormattedColors[i].replace(/["'()]/g,"").replace("%","").split(" ")[1]);
			  var hex3 = Number(aFormattedColors[i].replace(/["'()]/g,"").replace("%","").split(" ")[2]);
		  
		  	  var oColor = document.createElement("input");

			  oColor.setAttribute("class", "form-control");
			  oColor.setAttribute("type", "color");
			  
			  console.log(aFormattedColors[i].replace(/["'()]/g,"").replace("%","").split(" "));
			  console.log(hex1,hex2,hex3);
			  
			  var actualColor = "#" + ((1 << 24) + (hex1 << 16) + (hex2 << 8) + hex3).toString(16).slice(1);
			  
			  console.log(actualColor);
			  
			  //oColor.setAttribute("value", actualColor);
			  //oColor.setAttribute("name", "color");
			  //oColor.setAttribute("id", "color"+Number(document.getElementsByName("color").length));
			 
			  //document.getElementById("formGroup").appendChild(oColor);
			  
			  /*Inject new part*/
			  var oColor = document.createElement("input");
			  var oInputGroup = document.createElement("div");
			  var oInputGroupAppend =document.createElement("div");
			  var oButton = document.createElement("button");
			  
			  oColor.setAttribute("class", "form-control");
			  oColor.setAttribute("type", "color");
			  oColor.setAttribute("value", actualColor);
			  oColor.setAttribute("name", "color");
			  oColor.setAttribute("id", "color"+Number(document.getElementsByName("color").length));
			 
			 //add classes
			 oInputGroup.setAttribute("class", "input-group mb-3");
			 oInputGroup.setAttribute("id", "control"+Number(document.getElementsByName("color").length));
			 
			 oInputGroupAppend.setAttribute("class", "input-group-append");
			 oButton.setAttribute("class", "btn btn-success editColor");
			 oButton.setAttribute("id", "edit"+Number(document.getElementsByName("color").length));
			 //oButton.setAttribute("onclick", ""); 
			 
			 oButton.onclick = function(event) {
				  console.log(event.target.id);
				  
				  var id = event.target.id;
				  
				  var color = document.getElementById("color"+id.split("edit")[1]).value;
				  
				  sColorID = document.getElementById("color"+id.split("edit")[1]);
				  
				  console.log(color);
				  
				  $("#myModal").modal('show');
				  
				  var oColor = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(color);
				  
				  var r = parseInt(oColor[1], 16);
				  var g = parseInt(oColor[2], 16);
				  var b = parseInt(oColor[3], 16); 
				  
				  $("#colorPicker").css('background-color', color);
				  
				  document.getElementById("rValue").innerHTML = r;
				  document.getElementById("gValue").innerHTML = g;
				  document.getElementById("bValue").innerHTML = b;
				  
				  document.getElementById("rRange").value = r;
				  document.getElementById("gRange").value = g;
				  document.getElementById("bRange").value = b;
				  
				};
			 
			 //Put together the html elements
			  document.getElementById("formGroup").appendChild(oColor); 
			  document.getElementById("formGroup").appendChild(oInputGroup).appendChild(oColor);
			  document.getElementById("formGroup").appendChild(oInputGroup).appendChild(oInputGroupAppend).appendChild(oButton);
		  
		  }
		

		
		}
		else{

			/*
			<div class="input-group mb-3">
							  <input name="color" type="color" id="color0" class="form-control" value="#ff0000">
							  <div class="input-group-append">
								<button class="btn btn-success" type="submit">Go</button>
							  </div>
							</div>
			
			*/
		
		  var oColor = document.createElement("input");
		  var oInputGroup = document.createElement("div");
		  var oInputGroupAppend =document.createElement("div");
		  var oButton = document.createElement("button");
		  
		  oColor.setAttribute("class", "form-control");
		  oColor.setAttribute("type", "color");
		  oColor.setAttribute("value", "#ff0000");
		  oColor.setAttribute("name", "color");
		  oColor.setAttribute("id", "color"+Number(document.getElementsByName("color").length));
		 
		 //add classes
		 oInputGroup.setAttribute("class", "input-group mb-3");
		 oInputGroup.setAttribute("id", "control"+Number(document.getElementsByName("color").length));
		 
		 oInputGroupAppend.setAttribute("class", "input-group-append");
		 oButton.setAttribute("class", "btn btn-success editColor");
		 oButton.setAttribute("id", "edit"+Number(document.getElementsByName("color").length));
		 //oButton.setAttribute("onclick", ""); 
		 
		 oButton.onclick = function(event) {
			  console.log(event.target.id);
			  
			  var id = event.target.id;
			  
			  var color = document.getElementById("color"+id.split("edit")[1]).value;
			  
			  sColorID = document.getElementById("color"+id.split("edit")[1]);
			  
			  console.log(color);
			  
			  $("#myModal").modal('show');
			  
			  var oColor = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(color);
			  
			  var r = parseInt(oColor[1], 16);
			  var g = parseInt(oColor[2], 16);
			  var b = parseInt(oColor[3], 16); 
			  
			  $("#colorPicker").css('background-color', color);
			  
			  document.getElementById("rValue").innerHTML = r;
			  document.getElementById("gValue").innerHTML = g;
			  document.getElementById("bValue").innerHTML = b;
			  
			  document.getElementById("rRange").value = r;
			  document.getElementById("gRange").value = g;
			  document.getElementById("bRange").value = b;
			  
			};
		 
		 //Put together the html elements
		  document.getElementById("formGroup").appendChild(oColor); 
		  document.getElementById("formGroup").appendChild(oInputGroup).appendChild(oColor);
		  document.getElementById("formGroup").appendChild(oInputGroup).appendChild(oInputGroupAppend).appendChild(oButton);
		}
	

	}
	
	removeNewColor = function(bSelected){
	
	
		if(bSelected){
		
			console.log(document.getElementsByName("color").length);
			
			var nLength = document.getElementsByName("color").length;
		
			for(var i=0; i<nLength; i++){
				console.log("length",nLength);
				console.log("id",i);
				
				var oElement = document.getElementById("control"+i);
			
				oElement.parentNode.removeChild(oElement);
				
			}
			
			
		}
		else{
			var nLastId = Number(document.getElementsByName("color").length)-1;
			var oElement = document.getElementById("control"+nLastId);
			
			oElement.parentNode.removeChild(oElement);
		}
	
		
		
	}
	
	onPressAction = function(fromColor,toColor){
		var d = document;
		var nDuration;
		
		var oStartColor, oEndColor;
		
		console.log("fromColor",colorList);
		
		
		

		//itt van felülírva a két szín
		var sStartColor = document.getElementById("color"+colorList).value;
		var sEndColor = document.getElementById("color"+(colorList+1)).value;
		
		var aStartColor = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(sStartColor);
		var aEndColor = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(sEndColor);
		
		oStartColor = 	{r:parseInt(aStartColor[1], 16), g:parseInt(aStartColor[2], 16), b:parseInt(aStartColor[3], 16)}; 
		oEndColor = 	{r:parseInt(aEndColor[1], 16), g:parseInt(aEndColor[2], 16), b:parseInt(aEndColor[3], 16)};
		
		var nHour = Number(document.getElementById("hour").value);
		var nMinute = Number(document.getElementById("minute").value);
		
		if(nHour != undefined && nHour != ""){
			nDuration = nHour + nMinute/60
		}
		else{
			nDuration = 0 + nMinute/60
		}
	
		
		
		var iterate = document.getElementsByName("color").length-1;
		var lastStep = document.getElementsByName("color").length-2;
		
		var nDurationInMs = nDuration*60*60*1000;

		console.log("Duration", lastStep);

		fade(el,'background-color',oStartColor,oEndColor,nDurationInMs/iterate,iterate,lastStep);
		
		$("#playButton").fadeOut(1000);
		$("#settingsButton").fadeOut(1000);
		
		
		
	};
	
	///this can be a timer
	onShowTimer = function(){
		onOpenFullScreen();
		$("#playButton").fadeOut(1000);
		$("#counter").fadeIn(100);
		
		console.log(document.getElementById("demo"));
		
		onCheckCollapsed();
		
		var x = 5;
		var intervalID = setInterval(function () {

		   // Your logic here
			document.getElementById("counter").textContent = x;

			 console.log("test",document.getElementById("counter").textContent);

		   if (--x === 0) {
		   
			   window.clearInterval(intervalID);
				$("#counter").fadeOut(500);
				
					onInitFade(1)
				
				
		   }
		}, 1000);
		
	
	},
	
	onSetTime = function(){
		var d = document;

		d.getElementById("fromTime").value = new Date().getHours().toString() + ":" + new Date().getMinutes().toString();
		d.getElementById("fromTime").disabled = true
		
		d.getElementById("toTime").value = ((new Date().getHours())+1).toString() + ":" + new Date().getMinutes().toString();
	
		console.log(d.getElementById("toTime"));
	};
	
	//https://www.apispreadsheets.com/upload
	onSendData = function(){
	
		var d = document;
	
		var oData ={
			starttime: d.getElementById("hour").value,
			endtime: d.getElementById("minute").value,
			duration: "",
			fromcolor: d.getElementById("color1").value,	
			tocolor: d.getElementById("color2").value
		
		}
	
		fetch("https://api.apispreadsheets.com/data/3689/", {
			method: "POST",
			body: JSON.stringify({"data": oData}),
		}).then(res =>{
			if (res.status === 201){
				// SUCCESS
			}
			else{
				// ERROR
			}
		})
	
	
	};
	
	$(document).ready(function(){
	 // onSetTime();
	  console.log("test");
	});
	
	
	onInitFade = function(nIterate){	  
		  var sEndColor,
		  aEndColor,
		  oEndColor,
	      property,
		  oStartColor;
		  var nIteration = nIterate;
		  var interval = 10;
		  var steps = 1000/interval;
		  var step_u = 1.0/steps;
		  var u = 0.0;
		  
		  
			sEndColor = document.getElementById("color0").value;
			aEndColor = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(sEndColor);
			oEndColor = 	{r:parseInt(aEndColor[1], 16), g:parseInt(aEndColor[2], 16), b:parseInt(aEndColor[3], 16)};
			property = "background-color";
			
			
			oStartColor = {r:255,g:255,b:255};
		  
		  
		  
		  var theInterval = setInterval(function(){
		  
			if (u >= 1.0){ 
				clearInterval(theInterval) 
			}
			
			
			var r = parseInt(lerp(oStartColor.r, oEndColor.r, u));
			var g = parseInt(lerp(oStartColor.g, oEndColor.g, u));
			var b = parseInt(lerp(oStartColor.b, oEndColor.b, u));
			
			var colorname = 'rgb('+r+','+g+','+b+')';

			//Show button if the transition is over
			if(u >1.0){
				onPressAction();
				
			}
			
			el.style.setProperty(property, colorname);
			u += step_u;
		  }, interval);
	};
	
	onEscapeFullscreen = function(){
		
		oStatus = false;
		
		if(document.fullscreen){
			onCloseFullScreen();
		}
		
	};
	
	onShowTime = function(){
		console.log("onShowTime");
		
		onDrawFullTime();	
		
		console.log(nDuration);
		
		if(nDuration > 0){
		
		document.getElementById("remainingTime").style.visibility = "visible";
		$("#remainingTime").fadeIn();
		
		setTimeout(function(){ $("#remainingTime").fadeOut(); }, 3000);
		
		}
		
		
		
	};
	
	onCheckCollapsed = function(){
		if($('#settingsButton').attr("aria-expanded")){
			$('#settingsButton').click()
		}
	};
	
	onEditColor = function(e){
		console.log(e);
	};

	
	$('.gradientId').on('click', function (e) {
	  console.log(e.target.children[0]);
	  
	  
	  if(e.target.children[1].style["background-image"]){
	  
	  var oColors = e.target.children[1].style["background-image"];
	  var sLabel = e.target.children[0].textContent.split(" ")[1].replace("perc","");
	  
			if(document.getElementsByName("color").length > 0){
			
				removeNewColor(true);
				
				addNewColor(oColors);
				
				document.getElementById("minute").valueAsNumber = sLabel;
			
			}
			else{
			
			
			
			}
	  
	  }
	  console.log(oColors);
	});
	
	
	$('.editColor').on('click', function(event) {
	  console.log(event.target.id);
	  
	  var id = event.target.id;
	  
	  var color = document.getElementById("color"+id.split("edit")[1]).value;
	  
	  sColorID = document.getElementById("color"+id.split("edit")[1]);
	  
	  
	  
	  $("#myModal").modal('show');
	  
	  var oColor = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(color);
	  
	  var r = parseInt(oColor[1], 16);
	  var g = parseInt(oColor[2], 16);
	  var b = parseInt(oColor[3], 16); 
	  
	  $("#colorPicker").css('background-color', color);
	  
	  console.log(r);
	  console.log(g);
	  console.log(b);
	  
	  document.getElementById("rValue").innerHTML = r;
	  document.getElementById("gValue").innerHTML = g;
	  document.getElementById("bValue").innerHTML = b;
	  
	  document.getElementById("rRange").value = r;
	  document.getElementById("gRange").value = g;
	  document.getElementById("bRange").value = b;
	  
	});
	
	var sColorID;
	var rSlider = document.getElementById("rRange");
	var gSlider = document.getElementById("gRange");
	var bSlider =document.getElementById("bRange");
	
	var rOutput = document.getElementById("rValue");
	var gOutput = document.getElementById("gValue");
	var bOutput = document.getElementById("bValue");
	
		rOutput.value = rSlider.value;
		gOutput.value = gSlider.value;
		bOutput.innerHTML = bSlider.value;

	rSlider.oninput = function() {
		rOutput.innerHTML = this.value;
	  onChangeColor(this.value);
	}

	gSlider.oninput = function(){
		gOutput.innerHTML = this.value;
		onChangeColor(this.value);
	}

	bSlider.oninput = function(){
		bOutput.innerHTML = this.value;
		onChangeColor(this.value);
	}

	showVal = function(value){
		//.log(value);
	}

	onChangeColor = function(color){
		
		var r = document.getElementById("rRange").value;
		var g = document.getElementById("gRange").value;
		var b = document.getElementById("bRange").value;

		$("#colorPicker").css('background-color', 'rgb('+r+','+g+','+b+')');
	}
	
	addModelColor = function(){
	
		var r = Number(document.getElementById("rRange").value);
		var g = Number(document.getElementById("gRange").value);
		var b = Number(document.getElementById("bRange").value);
		
		var actualColor = "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
		
		
		
		document.getElementById(sColorID.id).value = actualColor;
		
		console.log(actualColor);
		console.log(document.getElementById(sColorID.id).value);
		

	
	}



</script>
</body>
</html>
